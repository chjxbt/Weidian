webpackJsonp([24],{grur:function(t,c,l){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var e=l("mtWM"),a=l.n(e),s=l("P9l9"),i=l("CaOM"),o=l("Au9i"),n={data:function(){return{name:"",collect_list:[],all_check:!1,page_size:10,page_num:1,total_count:0,isScroll:!0}},components:{},methods:{getCollect:function(t){var c=this;a.a.get(s.a.get_prlike_productlike,{params:{token:localStorage.getItem("token"),page_num:t||1,page_size:this.page_size||10}}).then(function(l){if(200==l.data.status){for(var e=0;e<l.data.data.length;e++)l.data.data[e].click=!1;c.total_count=l.data.count,c.collect_list=t?c.collect_list.concat(l.data.data):[].concat(l.data.data)}})},checkClick:function(t){this.collect_list[t].click=!this.collect_list[t].click,this.all_check=this.checkAll()},checkAll:function(){for(var t=!0,c=0;c<this.collect_list.length;c++)if(0==this.collect_list[c].click)return t=!1;return t},allClick:function(){this.all_check=!this.all_check;for(var t=0;t<this.collect_list.length;t++)this.collect_list[t].click=this.all_check},touchMove:function(){var t=i.a.getScrollTop(),c=i.a.getScrollHeight();t+i.a.getClientHeight()>=c-10&&this.isScroll&&(this.isScroll=!1,this.collect_list.length==this.total_count?Object(o.Toast)({message:"数据已加载完",className:"m-toast-warning"}):(this.page_num=this.page_num+1,this.getCollect(this.page_num)))},deleteClick:function(){for(var t=this,c=[],l=0;l<this.collect_list.length;l++)this.collect_list[l].click&&c.push(this.collect_list[l].plid);a.a.post(s.a.batch_del_productlike+"?token="+localStorage.getItem("token"),{plid:c.join(",")}).then(function(c){200==c.data.status?(Object(o.Toast)({message:c.data.message,className:"m-toast-success"}),t.getCollect()):Object(o.Toast)({message:c.data.message,className:"m-toast-fail"})})}},created:function(){this.getCollect()}},r={render:function(){var t=this,c=t.$createElement,l=t._self._c||c;return l("div",{staticClass:"m-collect",on:{touchmove:t.touchMove}},[t._l(t.collect_list,function(c,e){return[l("div",{staticClass:"m-collect-one"},[l("img",{staticClass:"m-collect-img",attrs:{src:c.productinfo.prmainpic,alt:""}}),t._v(" "),l("div",{staticClass:"m-collect-text"},[l("div",[l("span",{staticClass:"m-check",class:c.click?"active":"",on:{click:function(c){c.stopPropagation(),t.checkClick(e)}}}),t._v(" "),l("span",{staticClass:"m-red"},[t._v(t._s(c.productinfo.prsalestatus))])]),t._v(" "),l("span",[t._v("已有"+t._s(c.forwardnum)+"人发圈")])])])]}),t._v(" "),l("div",{staticClass:"m-collect-fixed"},[l("div",{staticClass:"m-left"},[l("span",{staticClass:"m-check",class:t.all_check?"active":"",on:{click:t.allClick}}),t._v(" "),l("span",[t._v("全选")])]),t._v(" "),l("span",{staticClass:"m-right",on:{click:t.deleteClick}},[t._v("删除")])])],2)},staticRenderFns:[]};var h=l("VU/8")(n,r,!1,function(t){l("j44o")},null,null);c.default=h.exports},j44o:function(t,c){}});
//# sourceMappingURL=24.4f43639e222932617cf2.js.map