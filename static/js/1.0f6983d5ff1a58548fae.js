webpackJsonp([1],{W2Q3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mtWM"),n=a.n(o),i=a("P9l9"),s=a("CaOM"),c=a("Au9i"),r={data:function(){return{name:"",check:!0}},components:{},methods:{isWeiXin:function(){var t=window.navigator.userAgent.toLowerCase();return console.log(t),"micromessenger"==t.match(/MicroMessenger/i)},login:function(){this.check&&n.a.get(i.a.get_config,{params:{url:window.location.href}}).then(function(t){if(200==t.data.status){var e=t.data.data.appId,a=window.location.href;window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+encodeURIComponent(a)+"&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect"}}).catch(function(t){console.log(t,"1111")})},checkClick:function(){this.check=!this.check}},mounted:function(){var t=this;s.a.changeTitle("登录"),this.isWeiXin()&&s.a.GetQueryString("code")&&(window.localStorage.setItem("code",s.a.GetQueryString("code")),n.a.get(i.a.get_accesstoken,{params:{code:s.a.GetQueryString("code"),UPPerd:localStorage.getItem("UPPerd")||""}}).then(function(e){200==e.data.status?(window.localStorage.setItem("access_token",e.data.data.access_token),window.localStorage.setItem("token",e.data.data.token),window.localStorage.setItem("openid",e.data.data.openid),window.localStorage.setItem("is_first",e.data.data.is_first),window.localStorage.setItem("wximg",e.data.data.wximg),window.localStorage.setItem("subscribe",e.data.data.subscribe),window.localStorage.setItem("is_today_first",e.data.data.is_today_first),window.localStorage.setItem("user_level",e.data.data.user_level),t.$store.state.tabbar=e.data.data.icon,t.$store.state.tabbar_select=e.data.data.icon[0].name,t.$router.push("/index/index")):Object(c.Toast)({message:e.data.message,className:"m-toast-fail"})}))},created:function(){}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-login"},[e("img",{staticClass:"m-login-logo",attrs:{src:"",alt:""}}),this._v(" "),e("div",{staticClass:"m-login-btn"},[e("span",{on:{click:this.login}},[this._v("微信登录")])])])},staticRenderFns:[]};var l=a("VU/8")(r,d,!1,function(t){a("lfEw")},"data-v-7eb52602",null);e.default=l.exports},lfEw:function(t,e){}});
//# sourceMappingURL=1.0f6983d5ff1a58548fae.js.map