{"version":3,"sources":["webpack:///src/views/login/login.vue","webpack:///./src/views/login/login.vue?6d63","webpack:///./src/views/login/login.vue"],"names":["login_login","data","name","check","components","methods","isWeiXin","ua","window","navigator","userAgent","toLowerCase","console","log","match","login","this","axios_default","a","get","api","get_config","params","url","location","href","then","res","status","id","appId","encodeURIComponent","catch","error","checkClick","mounted","_this","common","changeTitle","GetQueryString","localStorage","setItem","get_accesstoken","code","UPPerd","getItem","access_token","token","openid","is_first","wximg","subscribe","is_today_first","user_level","$store","state","tabbar","icon","tabbar_select","$router","push","Object","mint_ui_common","message","className","created","views_login_login","render","_h","$createElement","_c","_self","staticClass","attrs","src","alt","_v","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"kKAsBAA,GACAC,KADA,WAEA,OACAC,KAAA,GACAC,OAAA,IAGAC,cACAC,SACAC,SADA,WAEA,IAAAC,EAAAC,OAAAC,UAAAC,UAAAC,cAEA,OADAC,QAAAC,IAAAN,GACA,kBAAAA,EAAAO,MAAA,oBAOAC,MAXA,WAYAC,KAAAb,OACAc,EAAAC,EAAAC,IAAAC,EAAA,EAAAC,YACAC,QACAC,IAAAf,OAAAgB,SAAAC,QAEAC,KAAA,SAAAC,GACA,QAAAA,EAAA1B,KAAA2B,OAAA,CACA,IAAAC,EAAAF,EAAA1B,UAAA6B,MACAP,EAAAf,OAAAgB,SAAAC,KAEAjB,OAAAgB,SAAAC,KAAA,6DACAI,EAAA,iBAAAE,mBAAAR,GAAA,uEAGAS,MAAA,SAAAC,GACArB,QAAAC,IAAAoB,EAAA,WASAC,WApCA,WAqCAlB,KAAAb,OAAAa,KAAAb,QAGAgC,QAhDA,WAgDA,IAAAC,EAAApB,KACAqB,EAAA,EAAAC,YAAA,MACAtB,KAAAV,YAEA+B,EAAA,EAAAE,eAAA,UAEA/B,OAAAgC,aAAAC,QAAA,OAAAJ,EAAA,EAAAE,eAAA,SACAtB,EAAAC,EAAAC,IAAAC,EAAA,EAAAsB,iBACApB,QACAqB,KAAAN,EAAA,EAAAE,eAAA,QACAK,OAAAJ,aAAAK,QAAA,iBAEAnB,KAAA,SAAAC,GACA,KAAAA,EAAA1B,KAAA2B,QACApB,OAAAgC,aAAAC,QAAA,eAAAd,EAAA1B,UAAA6C,cACAtC,OAAAgC,aAAAC,QAAA,QAAAd,EAAA1B,UAAA8C,OACAvC,OAAAgC,aAAAC,QAAA,SAAAd,EAAA1B,UAAA+C,QACAxC,OAAAgC,aAAAC,QAAA,WAAAd,EAAA1B,UAAAgD,UACAzC,OAAAgC,aAAAC,QAAA,QAAAd,EAAA1B,UAAAiD,OACA1C,OAAAgC,aAAAC,QAAA,YAAAd,EAAA1B,UAAAkD,WACA3C,OAAAgC,aAAAC,QAAA,iBAAAd,EAAA1B,UAAAmD,gBACA5C,OAAAgC,aAAAC,QAAA,aAAAd,EAAA1B,UAAAoD,YACAjB,EAAAkB,OAAAC,MAAAC,OAAA7B,EAAA1B,UAAAwD,KACArB,EAAAkB,OAAAC,MAAAG,cAAA/B,EAAA1B,UAAAwD,KAAA,GAAAvD,KACAkC,EAAAuB,QAAAC,KAAA,iBAEAC,OAAAC,EAAA,MAAAD,EAAAE,QAAApC,EAAA1B,KAAA8D,QAAAC,UAAA,qBAMAC,QAhFA,cCnBAC,GADiBC,OAFjB,WAA0B,IAAaC,EAAbpD,KAAaqD,eAA0BC,EAAvCtD,KAAuCuD,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,eAAAC,OAAkCC,IAAA,GAAAC,IAAA,MAApJ3D,KAAuK4D,GAAA,KAAAN,EAAA,OAAwBE,YAAA,gBAA0BF,EAAA,QAAaO,IAAIC,MAA1O9D,KAA0OD,SAA1OC,KAA6P4D,GAAA,eAEtQG,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAlF,EACAkE,GATA,EAVA,SAAAiB,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/1.0f6983d5ff1a58548fae.js","sourcesContent":["<template>\n    <div class=\"m-login\">\n      <img src=\"\" class=\"m-login-logo\" alt=\"\">\n      <div class=\"m-login-btn\">\n        <span @click=\"login\">微信登录</span></div>\n      <!--<div class=\"m-login-bottom\">-->\n        <!--<span class=\"m-login-check-box\">-->\n          <!--<span class=\"m-login-check\" :class=\"check?'active':''\" @click.stop=\"checkClick\"></span>-->\n          <!--&lt;!&ndash;<input type=\"checkbox\" class=\"m-login-check\">&ndash;&gt;-->\n          <!--<span>我已阅读并同意《用户使用协议》</span>-->\n        <!--</span>-->\n      <!--</div>-->\n    </div>\n\n\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import axios from 'axios';\n  import api from '../../api/api';\n  import common from '../../common/js/common';\n  import {Toast} from 'mint-ui';\n    export default {\n        data() {\n            return {\n                name: '',\n              check:true\n            }\n        },\n        components: {},\n        methods: {\n          isWeiXin() {\n            let ua = window.navigator.userAgent.toLowerCase();\n            console.log(ua);//mozilla/5.0 (iphone; cpu iphone os 9_1 like mac os x) applewebkit/601.1.46 (khtml, like gecko)version/9.0 mobile/13b143 safari/601.1\n            if (ua.match(/MicroMessenger/i) == 'micromessenger') {\n              return true;\n            } else {\n              return false;\n            }\n\n          },\n          login() {\n            if(this.check){\n              axios.get(api.get_config,{\n                params:{\n                  url: window.location.href\n                }\n              } ).then((res) => {\n                if(res.data.status == 200){\n                  const id = res.data.data.appId\n                  const url = window.location.href;\n                  // const  url = 'https://daaiti.cn/WeiDian/#/login';\n                  window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid='\n                    +  id + '&redirect_uri='+ encodeURIComponent(url) + '&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect'\n                }\n\n              }).catch((error) => {\n                console.log(error ,'1111')\n              })\n\n            }else{\n\n            }\n\n\n          },\n          checkClick(){\n            this.check = !this.check;\n          }\n        },\n      mounted(){\n        common.changeTitle('登录');\n        if(this.isWeiXin()){    //是来自微信内置浏览器\n          // 获取微信信息，如果之前没有使用微信登陆过，将进行授权登录\n          if(common.GetQueryString('code')){\n            // alert(common.GetQueryString('code'))\n            window.localStorage.setItem(\"code\",common.GetQueryString('code'));\n            axios.get(api.get_accesstoken,{\n              params:{\n                code: common.GetQueryString('code'),\n                UPPerd:localStorage.getItem('UPPerd') || ''\n              }\n            }).then(res => {\n              if(res.data.status == 200){\n                window.localStorage.setItem(\"access_token\",res.data.data.access_token);\n                window.localStorage.setItem(\"token\",res.data.data.token);\n                window.localStorage.setItem(\"openid\",res.data.data.openid);\n                window.localStorage.setItem(\"is_first\",res.data.data.is_first);\n                window.localStorage.setItem(\"wximg\",res.data.data.wximg);\n                window.localStorage.setItem(\"subscribe\",res.data.data.subscribe);\n                window.localStorage.setItem(\"is_today_first\",res.data.data.is_today_first);\n                window.localStorage.setItem(\"user_level\",res.data.data.user_level);\n                this.$store.state.tabbar = res.data.data.icon;\n                this.$store.state.tabbar_select = res.data.data.icon[0].name;\n                this.$router.push('/index/index');\n              }else{\n                Toast({ message: res.data.message, className: 'm-toast-fail' });\n              }\n            });\n          }\n        }\n      },\n        created() {\n\n        }\n    }\n</script>\n<style lang=\"less\" rel=\"stylesheet/less\" scoped>\n.m-login{\n  background-color: #9fd0bf;\n  min-height: 100%;\n  .m-login-logo{\n    display: inline-block;\n    width: 400px;\n    height: 200px;\n    border: 1px solid #a4a4a4;\n    margin: 300px 0;\n  }\n  .m-login-btn{\n    margin-top: 150px;\n    span{\n      display: inline-block;\n      width: 630px;\n      height: 97px;\n      line-height: 97px;\n      color: #fff;\n      font-size: 32px;\n      border-radius: 48.5px;\n      background-color: #09bb07;\n      box-shadow: 0 13px 22px 0 rgba(9, 187, 7, 0.35);\n    }\n  }\n  .m-login-bottom{\n    margin-top: 40px;\n    font-size: 22px;\n    color: #666;\n    line-height: 25px;\n    .m-login-check{\n      display: inline-block;\n      width: 23px;\n      height: 23px;\n      background: url(\"/static/images/icon-check-personal.png\") no-repeat center;\n      background-size: 100% 100%;\n      vertical-align: bottom;\n      &.active{\n        background: url(\"/static/images/icon-check-personal-active.png\") no-repeat center;\n        background-size: 100% 100%;\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/login/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-login\"},[_c('img',{staticClass:\"m-login-logo\",attrs:{\"src\":\"\",\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"m-login-btn\"},[_c('span',{on:{\"click\":_vm.login}},[_vm._v(\"微信登录\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7eb52602\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7eb52602\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7eb52602\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7eb52602\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}