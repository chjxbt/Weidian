{"version":3,"sources":["webpack:///src/views/discover/activityContent.vue","webpack:///./src/views/discover/activityContent.vue?2ffc","webpack:///./src/views/discover/activityContent.vue"],"names":["activityContent","name","data","baid","banner","activity_list","icon_list","src","url","show_fixed","tnid","isScroll","total_count","count","bottom_show","components","mFooter","footer","ctx","share","attention","methods","closeModal","v","this","touchMove","scrollTop","common","getScrollTop","scrollHeight","getScrollHeight","getClientHeight","length","loadBottom","getActivity","start","_this","axios_default","a","get","api","get_bigactivity","localStorage","getItem","params","page_num","page_size","then","res","status","concat","activity","arr","i","_arr","likenum","alreadylike","actext","show_text","icon","Object","mint_ui_common","message","className","loadTop","$refs","loadmore","onTopLoaded","iconClick","list","changeLike","index","post","ac_like","acid","Number","fixedClick","copyText","link","window","location","href","prid","$copyText","e","showMoreText","bool","assign_default","mounted","$route","query","discover_activityContent","render","_vm","_h","$createElement","_c","_self","on","touchmove","staticClass","attrs","_v","ref","top-method","_l","item","$event","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/23.b7dc40923325135fb7cd.js","sourcesContent":["<template>\n  <div @touchmove=\"touchMove\">\n    <img class=\"activity-img\" :src=\"banner\">\n\n    <mt-loadmore :top-method=\"loadTop\" ref=\"loadmore\">\n      <div class=\"m-index-section\">\n        <template v-for=\"(item,index) in activity_list\">\n          <ctx :icon=\"icon_list\" :list=\"item\" :index=\"index\" @iconClick=\"iconClick\" @showMoreText=\"showMoreText\"></ctx>\n        </template>\n      </div>\n    </mt-loadmore>\n\n    <!--<share v-if=\"show_fixed\" @fixedClick=\"fixedClick\"></share>-->\n    <attention v-if=\"show_fixed\" @closeModal=\"closeModal('show_fixed')\"></attention>\n    <div class=\"bottom-prompt\" v-if=\"bottom_show\">\n      <div class=\"bottom-line\"></div>\n      <div class=\"m-grey-color\">我是有底线的</div>\n      <div class=\"bottom-line\"></div>\n    </div>\n    <!--<m-footer></m-footer>-->\n  </div>\n</template>\n\n<script>\n  import mFooter from '../../components/common/footer';\n  import ctx from '../index/components/ctx';\n  import share from '../../components/common/share';\n  import api from '../../api/api';\n  import axios from 'axios';\n  import { Toast } from 'mint-ui';\n  import common from '../../common/js/common';\n  import attention from '../../components/common/attention';\n\n  export default {\n    name: \"activityContent\",\n    data() {\n      return {\n        baid: \"\",\n        banner:'',\n        activity_list: [],\n        icon_list:[\n          {\n            src:'icon-like',\n            name:'收藏',\n            url:'icon-like'\n          },\n          /*{\n            src:'icon-lian',\n            name:'复制链接',\n            url:'icon-lian'\n          },*/\n          {\n            src:'icon-share',\n            name:'转发',\n            url:'icon-share'\n          }\n        ],\n        show_fixed: false,\n        tnid: \"5ed4e908-a6db-11e8-b2ff-0cd292f93404\", // ertiao\n        isScroll: true,\n        total_count: 0,\n        count: 5,\n        bottom_show:false,\n      }\n    },\n    components: { mFooter, ctx, share, attention },\n    methods: {\n      /*关闭分享的模态框*/\n      closeModal(v){\n        // console.log(v);\n        this[v]  = false;\n      },\n      touchMove(){\n        let scrollTop = common.getScrollTop();\n        let scrollHeight = common.getScrollHeight();\n        let ClientHeight = common.getClientHeight();\n        if (scrollTop + ClientHeight  >= scrollHeight -10) {\n          if(this.isScroll){\n            this.isScroll = false;\n            if(this.activity_list.length == this.total_count){\n              this.bottom_show = true;\n            }else{\n              this.loadBottom();\n            }\n          }\n\n        }\n      },\n      /*获取活动列表*/\n      getActivity(start, count){\n        axios.get(api.get_bigactivity + '?token=' + localStorage.getItem('token'), {\n          params: { page_num: start || 1, page_size: count || this.count, baid: this.baid }}).then(res => {\n          if(res.data.status == 200){\n            this.isScroll = true;\n            this.total_count = res.data.data.total_count;\n            this.banner = res.data.data.banner;\n            if(start){\n              this.activity_list = this.activity_list.concat(res.data.data.activity);\n              if(this.activity_list.length == this.total_count){\n                this.isScroll = false;\n              }\n            }else{\n              this.activity_list = res.data.data.activity;\n            }\n\n            let arr = [].concat(this.activity_list);\n            for(let i=0;i<arr.length;i++) {\n              let _arr = [\n                {\n                  src: 'icon-like',\n                  name: '123123',\n                  url: 'icon-like'\n                },\n                /*{\n                  src: 'icon-lian',\n                  name: '复制链接',\n                  url: 'icon-lian'\n                },*/\n                {\n                  src: 'icon-share',\n                  name: '转发',\n                  url: 'icon-share'\n                }\n              ];\n              _arr[0].name = arr[i].likenum;\n              _arr[0].alreadylike = arr[i].alreadylike;\n              arr[i].actext.length > 92 && (arr[i].show_text = true);\n              arr[i].icon = [].concat(_arr);\n              // console.log(_arr[0].name, arr[i].likenum)\n            }\n            this.activity_list = [].concat(arr);\n          }else{\n            Toast({ message: res.data.message, className: 'm-toast-fail' });\n          }\n        })\n      },\n      // 下拉刷新\n      loadTop() {\n        this.getActivity();\n        this.$refs.loadmore.onTopLoaded();\n      },\n      // 上拉加载更多\n      loadBottom() {\n        this.getActivity(this.activity_list.length, this.count);\n        // this.$refs.loadmore.onBottomLoaded();\n      },\n      /*每个活动icon点击*/\n      iconClick(v, list){\n        switch (v){\n          case 0:\n            this.changeLike(list);\n            break;\n          /*case 1:\n            this.copyText(list);\n            break;*/\n          case 1:\n            this.show_fixed = true;\n            break;\n        }\n      },\n      // 活动点赞\n      changeLike(index) {\n        let arr = this.activity_list[index].icon[0];\n        // console.log(arr);\n        axios.post(api.ac_like + '?token=' + localStorage.getItem('token'), {\n          acid: this.activity_list[index].acid\n        }).then(res => {\n          if(res.data.status == 200){\n            if(arr.alreadylike) {\n              arr.name -= 1;\n              arr.alreadylike = false;\n              Toast({ message: res.data.message, className: 'm-toast-warning' });\n            }else if(!arr.alreadylike) {\n              arr.name = Number(arr.name) + 1;\n              arr.alreadylike = true;\n              Toast({ message: res.data.message, className: 'm-toast-success' });\n            }\n            // console.log(arr);\n          }else{\n            Toast({ message: res.data.message, className: 'm-toast-fail' });\n          }\n        });\n      },\n      /*分享按钮点击*/\n      fixedClick(){\n        this.show_fixed = false;\n      },\n      // 复制链接\n      copyText(list) {\n        let link = window.location.href + this.activity_list[list].prid;\n        this.$copyText(link).then(function (e) {\n          Toast({ message: \"复制成功\", className: 'm-toast-success' });\n        })\n      },\n      // 展开全文、收齐全文\n      showMoreText(bool,v){\n        let arr = [].concat(this.activity_list);\n        arr[v] = Object.assign({}, arr[v], { show_text: bool });\n        this.activity_list = [].concat(arr);\n      },\n    },\n    mounted() {\n      this.baid = this.$route.query.baid;\n      this.getActivity();\n    }\n  }\n</script>\n\n<style lang=\"less\" rel=\"stylesheet/less\" scoped>\n  @import \"../../common/css/index\";\n\n  .activity-img {\n    width: 750px;\n    height: 280px;\n    margin-bottom: 40px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/discover/activityContent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{on:{\"touchmove\":_vm.touchMove}},[_c('img',{staticClass:\"activity-img\",attrs:{\"src\":_vm.banner}}),_vm._v(\" \"),_c('mt-loadmore',{ref:\"loadmore\",attrs:{\"top-method\":_vm.loadTop}},[_c('div',{staticClass:\"m-index-section\"},[_vm._l((_vm.activity_list),function(item,index){return [_c('ctx',{attrs:{\"icon\":_vm.icon_list,\"list\":item,\"index\":index},on:{\"iconClick\":_vm.iconClick,\"showMoreText\":_vm.showMoreText}})]})],2)]),_vm._v(\" \"),(_vm.show_fixed)?_c('attention',{on:{\"closeModal\":function($event){_vm.closeModal('show_fixed')}}}):_vm._e(),_vm._v(\" \"),(_vm.bottom_show)?_c('div',{staticClass:\"bottom-prompt\"},[_c('div',{staticClass:\"bottom-line\"}),_vm._v(\" \"),_c('div',{staticClass:\"m-grey-color\"},[_vm._v(\"我是有底线的\")]),_vm._v(\" \"),_c('div',{staticClass:\"bottom-line\"})]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5eab60b0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/discover/activityContent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5eab60b0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./activityContent.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./activityContent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./activityContent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5eab60b0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./activityContent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5eab60b0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/discover/activityContent.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}